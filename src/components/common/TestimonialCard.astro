---
interface Props {
  name: string;
  company: string;
  text: string;
  avatar?: string;
  rating?: number;
  service?: string;
}

const { name, company, text, avatar, rating = 5, service } = Astro.props;
---

<div class="testimonial-card bg-white rounded-2xl p-6 shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
  <!-- Header -->
  <div class="flex items-start justify-between mb-4">
    <div class="flex items-center space-x-3">
      {avatar ? (
        <img 
          src={avatar} 
          alt={name}
          class="w-12 h-12 rounded-full object-cover border-2 border-gray-200"
        />
      ) : (
        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-bold text-lg">
          {name.charAt(0)}
        </div>
      )}
      
      <div>
        <h4 class="font-semibold text-gray-900">{name}</h4>
        <p class="text-sm text-gray-600">{company}</p>
        {service && (
          <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mt-1">
            {service}
          </span>
        )}
      </div>
    </div>
    
    <!-- Rating -->
    <div class="flex items-center space-x-1">
      {Array.from({ length: 5 }, (_, i) => (
        <svg 
          class={`w-4 h-4 ${i < rating ? 'text-yellow-400 fill-current' : 'text-gray-300'}`}
          viewBox="0 0 20 20"
        >
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
        </svg>
      ))}
    </div>
  </div>
  
  <!-- Quote -->
  <blockquote class="text-gray-700 leading-relaxed mb-4">
    "{text}"
  </blockquote>
  
  <!-- Bottom -->
  <div class="flex items-center justify-between pt-4 border-t border-gray-100">
    <div class="flex items-center space-x-2 text-sm text-gray-500">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>Cliente verificado</span>
    </div>
    
    <div class="text-xs text-gray-400">
      {new Date().toLocaleDateString('es-CL', { 
        year: 'numeric', 
        month: 'short' 
      })}
    </div>
  </div>
</div>

<style>
  .testimonial-card {
    position: relative;
    overflow: hidden;
  }
  
  .testimonial-card::before {
    content: '"';
    position: absolute;
    top: -10px;
    left: 10px;
    font-size: 4rem;
    color: #e5e7eb;
    font-family: serif;
    line-height: 1;
  }
  
  .testimonial-card:hover::before {
    color: #d1d5db;
  }
</style> 